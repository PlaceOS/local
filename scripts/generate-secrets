#! /usr/bin/env bash
# shellcheck disable=1091

source ./.env.email

# Path of installation directory
base_path="$(cd "$(dirname "${BASH_SOURCE[0]}")" >/dev/null 2>&1 && pwd)/../"

image="placeos/init:${PLACE_INIT_TAG:-nightly}"

docker pull "${image}"

docker run --rm \
    -w /tmp/secrets \
    -v "${base_path}:/tmp/secrets" \
    -e PLACE_EMAIL="${PLACE_EMAIL}" \
    -e PLACE_PASSWORD="${PLACE_PASSWORD}" \
    -- "${image}" generate-secrets
